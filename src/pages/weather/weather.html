<ion-header>
  <ion-navbar color="primary">
    <ion-title>Weather</ion-title>
    <ion-buttons end>
      <button ion-button icon-only (click)="goHome()">
        <ion-icon name="home"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<!-- Search Form -->
<ion-content padding>
  <ion-row class="weather-search">
    <form [formGroup]="searchForm" (ngSubmit)="getConditions($event)">
      <ion-item>
        <ion-input formControlName="state" type="text" id="state" placeholder="State" required></ion-input>
      </ion-item>
      <ion-item>
        <ion-input formControlName="city" type="text" id="city" placeholder="City" required></ion-input>
      </ion-item>
      <button full ion-button icon-right type="submit">
        Search City
        <ion-icon name="search"></ion-icon>
      </button>
    </form>
  </ion-row>

  <!-- Observed Results -->
  <ion-card *ngIf="keys">
    <ion-card-header *ngIf="currentLocation">
      <ion-item>
        <img class="weather-icon" alt={{weather.current_observation.icon}} src={{weather.current_observation.icon_url}}/>
        {{weather.location.city}}, {{weather.location.state}}
      </ion-item>
    </ion-card-header>

    <ion-card-content *ngIf="currentWeather">
      <ion-row>
        <ion-col>
          <ion-item >
            <ion-icon name="thermometer" item-left></ion-icon>
            {{weather.current_observation.temp_f}}
          </ion-item>
        </ion-col>
        <ion-col>
          <ion-item>
            <ion-icon alt="precipitation" name="md-beaker" item-left></ion-icon>
            {{weather.current_observation.precip_today_in}}
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>
          <ion-item>
            <ion-icon alt="elevation" name="md-image" item-left></ion-icon>
            {{weather.current_observation.observation_location.elevation}}
          </ion-item>
        </ion-col>
        <ion-col>
          <ion-item>
            <ion-icon alt="forecast" name="md-calendar" item-left></ion-icon>
            <a href={{weather.current_observation.forecast_url}}>forecast</a>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-label>Show Radar</ion-label>
        <ion-toggle *ngIf="radar.url" (ionChange)="toggleRadar()"></ion-toggle>
        <ion-item *ngIf="radarVisible" class="fade in">
          <img class="radar" src={{radar.url}}/>
        </ion-item>
      </ion-row>
    </ion-card-content>
  </ion-card>
</ion-content>
